$ErrorActionPreference = "Stop"

$text = "this video was brought to you by IND dentle IO learning python Made Simple how's it going everyone in this video we're going to be exploring five useful generator functions that will help you understand how generators actually work starting with the first example which is just going to be a simple Fibonacci generator now first of all I'm going to import from typing the generator type then I'm going to create a function called Fibonacci generator and that's going to return a generator and a lot of people usually get scared when it comes to typing generators because there's actually three types we have to insert here the first one is going to be the type that we're going to yield the second is what can be sent to the generator which in this example will be none we don't want to send anything here and the third type is what we return from the generator which will also be none because we we are generating an infinite series of Fibonacci and throughout the five examples we're going to get much more comfortable with what this means so in this example we're using none for these two but in the other examples I will fill this with a value so you can see exactly what it does or what it looks like Anyway inside the generator first we want to create a and b and assign those the value of 0 and 1 to get started with Fibonacci and while true we're going to yield a and the only thing that makes this a generator is the yield keyword once you use yield and you yield a value it turns into a generator and all yield means to keep it simple is return this value and at the bottom we need to perform that Fibonacci operation which is AB is going to equal B A+ B and to make this visually easier to understand you can also put this in parentheses anyway next let's create our main entry point and since I have a shortcut in pycharm it's going to insert all of this for me but here I just have a main function that returns none because we only want to execute this in the if name is equal to Main Check and inside here I'll type in FIB gen for Fibonacci generator and that's going to be the generator of this type and that's going to equal a Fibonacci generator below that I'm going to create a number which will be of type integer and I'll show you what that does in just a moment and a line break which will be of type string and that's going to equal this dash time 20 below that we can type in while true and I'm going to take some input without capturing it this is just to pause the program until we tap on enter so here I'm going to insert the FST string that says tap enter for the next n numbers of Fibonacci so that's how many numbers we're going to generate in chunks and for I in range n we can print the next item in the Fibonacci generator so to grab something from a generator we need to use next and at the bottom just to make things look nice I'm going to print the line break now with all of this we can tap on run and to get the next 10 numbers of the Fibonacci sequence we just have to tap on enter and it's going to generate this list of Fibonacci numbers but before we continue that I wanted to put a line break right there so that the next time we run this we get 10 numbers generated in a nice format and at the bottom we can choose to generate 10 more and it will do that and again and again and again and we can do this indefinitely but what's really nice is that we're gener generating these on the spot which means we are not storing any of these values otherwise if you were just to create a regular function and you were to generate the next 100 numbers in the Fibonacci sequence you're going to have to create a big list for that so this can be considered much more memory efficient because we're only generating that value upon request for the second example we're going to be creating a line reader and to do that I'm going to import system and from typing I'm going to import generator once again then we'll create this generator function called read that takes a path of type string and it will return a generator that outputs a string or yields a string allows you to send nothing to it and that returns a string and inside we'll type in with open the path in read mode as file for line infile yield line. strip and this should actually be as which"

$voice = "am_adam"
$encodedText = [Uri]::EscapeDataString("{voice:$voice} $text")
$uri = "http://localhost:3006/read?text=$encodedText"

Write-Host "Sending 5-minute YouTube Transcript to TTS ($voice)..." -ForegroundColor Cyan
try {
    $response = Invoke-RestMethod -Uri $uri -Method Get
    Write-Host "Request sent successfully." -ForegroundColor Green
}
catch {
    Write-Error "Failed to send TTS request: $_"
}
